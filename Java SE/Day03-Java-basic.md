## Java 基础02

#### 内容摘要

运算符、位运算、交换两个变量4种方法

---

#### 运算符

* 算术运算符

  * `+` `-` `*` `/` `%` `++` `--`

  * `/` ：当参与运算的两个操作数都是整数时，除法结果只保留整数部分

    ```java
    double d1 = 1 / 2; // d1 的值为 0.0，整数除整数，只保留整数部分

    double d2 = 1.0 * 1 / 2; // d2 的值为 0.5，默认类型转化为double之后在运算
    ```

  * `%`：取余运算的结果的正负号取决于被取余数

  * `++` `--`：自增、自减运算符

    * 变量 ++ ：先进行表达式运算，再自增，自减
    * ++ 变量：先自增，自减，再进行表达式运算

* 赋值运算符

  * `=` ：给变量赋值，即在变量的内存空间中写入数值

  * `+=` `-=` `*=` `/=` `%=` 先运算再赋值

    ```Java
    i += 2; // 等价于 i = i + 2;
    ```

* 关系运算符

  * `==` `!=` `>` `<` `>=` `<=` `instanceof`
  * `==` ： 判断是否相等，不能写成等号
  * 比较结果是 boolean 类型
  * `instanceof` 检查是否是类的对象

* 逻辑运算符

  * `&` `|` `&&` `||` `^` `!`
  * 区间不等式写法： 1< x < 5    =>   `1 < x && x > 5`
  * & 与 && 区别，|与||  同理
    * 都是与操作
    * && 发现第一个逻辑表达式能确定结果时，则不会执行第二个逻辑表达式
    * & 无论逻辑表达式结果，能否确定结果时，都会执行两个逻辑运算

* 位运算符

  * 直接操作数据的 bit 位，效率高

  * `<<` `>>` `>>>` 

  * `<<` 左移n位，最高位（符号位）不变，相当于给原操作数扩大 2^n^ 倍，即 `4 << n   ==>  4*2^n`

  * `>>` 右移一位，最高位（符号位）不变，相当于给原操作数缩小 2 倍，即 `4 >> 1  ==>  4 / 2 = 2`

  * `>>>` 无符号右移，被移位二进制数最高位（即符号位）无论是 0 或 1，空缺位用 0 补

  * 移位时超过内存空间大小后，虚拟机会先取余，再进行移位

    ```Java
    int a = 2;// int 类型占用8个字节，32位
    a = a << 50;// 向左移50位，超过int实际位数，虚拟机会先取余，50%30 = 20，即向左移20位
    ```

  * `&` `|` `^` 

    * `&` 按位与，对二进制进行与操作，`1 & 0 = 0 `  `1 & 1 = 1` ，有 1 个 0 则为 0
    * `|` 按位或，对二进制进行或操作，`1 | 0 = 1`  `1 | 1 = 1` ，有 1 个 1 则为 1
    * `^` 异或，每一位进行异或操作，相同为0，不同为1
      * 0 ^ 0 = 0 ; a ^ a = 0 ; 1 ^ 0 = 1 ; a ^ 0 = a ;
    * `~` 按位取反，对数值的补码进行操作的

  * 高效率乘法操作，算出 2 与 8 的乘积 ` 2 << 3    == >   2 * 8  = 16`

  * 高效率判断一个大于 0 的正整数 n 是否是 2 的整数次倍 `(n & (n-1)) == 0 `

  * **取反 反码**

    * 反码：对于负数，符号位不变，数值位依次取反，正数的反码是其本身
    * 取反：包括符号位在内，各位依次取反

    ```Java
    //取反是对补码操作，因为Java中数值是以补码的形式存储
    // ~6 = -7; 对 6 取反 得 -7
    6 ==> 补码 0110 ==> 取反 1001 // 结果数的补码，要转成源码才能转成十进制
    1001 ==> 反码 1110 ==> 源码 1111 = -7 // 补码的补码就是源码
    ```

  * **交换两个变量**

    ```Java
    // 1. 中间变量
    int i = 1;
    int j = 2;
    int temp = i;
    i = j;
    j = temp;

    // 2. 加法
    int a = 1;
    int b = 2;
    a = a + b;// 代入下式
    b = a - b;// b = a + b - b = a
    a = a - b;// a = a + b - a = b ,交换成功

    // 3. 异或，运算规则见上
    int c = 1;
    int d = 2;
    c = c ^ d;// 代入下式
    d = c ^ d;// d = c ^ d ^ d 结合律， d ^ d = 0; c ^ 0 = c ==> d = c
    c = c ^ d;// c = c ^ d ^ c 交换律， c ^ c = 0; d ^ 0 = d ==> c = d

    // 4. 一句话
    int x = 1;
    int y = 2;
    x = (x + y) - (y = x);
    //拆分出来
    // x + y = 3
    // y = x = 1
    // x = 3 - 1 = 2 ，交换成功
    ```

* 三目运算符

  * （关系表达式）？表达式1 ：表达式2

    * 有返回值

    * 如果关系表达式为 true 执行 表达式1

    * 如果关系表达式为 false 执行 表达式2

      ​