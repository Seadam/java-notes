## Java 基础04

#### 内容摘要

循环控制，方法，数组，**数组赋值内存图解**，**Java内存模型**

------

#### 循环控制

* `break`   中断

  * 跳出当前单层循环，如果有多层循环只跳出当前循环（内层循环）
  * 带标签的 break，即可以控制中断任意层循环

  ```java
  //没带标签的 break，只能结束内层循环
  for(int i = 0; i < 3; i++) {
    for(int j = 0; j < 3; j++) {
      System.out.print("i = " + i + " && j = " + j + " | ");
      if(j == 2) break;
    }
  }

  Outer: // 标签，可以放在任意循环上面，取名任意
  for(int i = 0; i < 3; i++) {
    for(int j = 0; j < 3; j++) {
      System.out.print("i = " + i + " && j = " + j + " | ");
      if(j == 2) break Outer; // 结束标签名为 Outer 的循环
    }
  }
  ```

* `continue`   继续

  * 跳过本次循环 continue 之后的代码，直接进入下一次循环
  * 同理见上，也能使用带标签的 continue 

* `return`   返回

  * 结束一个方法，跳转到上层调用，用来结束循环原理是结束执行当前循环的方法

#### 方法

* 完成特定功能的代码块，函数就是 Java 中的方法

```Java
/*
      修饰符 返回类型 方法名（参数类型 参数名1,..., 参数类型 参数名n） {
          方法体；
          return 返回值；
      }
*/
```
* 修饰符：public static
* 返回类型：限定方法体代码返回的结果类型，void, int, ...
* 方法名：标识符，见名知意
* 参数列表
    * 参数类型：限定调用方法时传入参数的类型
    * 参数名：限定调用方法时传入参数的名称
    * **实际参数**：调用方法中，所传递的值称为实际参数
    * **形式参数**：参数列表中定义的值称为形式参数
    * 实际参数的类型会被形式参数的类型限定
* 方法体：执行特定功能的代码块
* 返回值：返回最终特定功能代码块的执行结果，可以无返回值
* 方法调用
    * 有返回值
        * 直接调用 `add(3, 4);`
        * 输出调用 `System.out.println(add(3, 4));`
        * 赋值调用 `int sum = add(3, 4);`
    * 无返回值
        * 直接调用
```Java
class Test {
  public static void main(String[] args) {
    int sum = add(5, 10); // 调用方法，执行
  }
  
  public static int add(int x, int y) { // 声明方法
    return x + y;
  }
}
```

* 注意事项：
  1. 不调用不执行
  2. 方法与方法之间平行关系，不能嵌套
  3. 参数之间用逗号 `,` 隔开
  4. 方法调用时不用再传递实际参数类型
  5. 若有返回值，一定要 return
* 方法重载
  * **方法名 + 参数列表 = 方法签名**，根据方法签名区分不同的方法
  * 参数列表：**参数个数** **参数类型** **参数顺序（参数类型顺序）** 
  * 在同一个类中，允许存在同名方法，参数列表要求不同，就是方法重载
  * 与返回值无关，只与**参数列表**有关
    * 有返回值的直接调用和无返回值的直接调用容易混淆，故不以返回值来区别重载

#### 数组

* 一片连续的存储空间，存储**相同类型的变量**的容器
* 数据元素空间紧邻，可以通过编号（**索引**）来访问数组元素
* 可以存储基本数据类型，也可以存储**引用数据类型**（对象地址）
* `[ ]` 表示这是一个数组类型
* **使用数组前，必须先初始化**
  * 初始化：为数组元素分配内存空间
  * 动态初始化：指定数组长度，由虚拟机分配初始值，默认赋值为 0
  * 静态初始化，指定初始值，由虚拟机决定数组长度
  * 数组长度：数组中元素个数
* 通过数组下标的形式，可以访问数组元素
  * **下标从0开始**
* Java 中内置对象，有自己的属性，比如 `length` 表示数组中元素个数

```Java 
/*
声明数组
    数据类型[] 数组名
    数据类型 数组名[]
*/
int[] arrays;

/*
动态初始化
	数据类型[] 数组名 = new 数据类型[数组长度]；
*/
int[] nums = new int[10];
// 直接输出 nums 显示 [I@14ae5a5  
// [ 表示 一维数组
// I 表示 数组元素是 int 类型
// 14ae5a5 表示内存地址的 hash 值

/*
静态初始化
	数据类型[] 数组名 = new 数据类型[]{元素1，元素2，...}；
*/
int[] arrays = new int[] {1,2,3,4};
```

#### new 关键字

* 开辟新的内存空间

#### 数组赋值与内存图解

![动态数组初始化内存图解](http://on-img.com/chart_image/5a50d8a5e4b05a8ff2ec0b84.png)

* arrays 引用变量：通过引用变量，间接操作数组在对内存上所对应的内存空间

* 静态数组初始化

  * `int[] a = new int[] {1, 2, 3, 4};`
  * 简化： int[] a = {1,2,3,4}

  1. 虚拟机确定元素个数，开辟相应内存空间
  2. 为每个内存空间分配默认值 0
  3. 为每个元素分配正确的初始值 1，2，3，4 

#### 数组常见异常

* 数组越界 *ArrayIndexOutOfBoundsException*
  * 访问数组中不存在的索引（下标）发生
* 空指针 *NullPointerException*
  * 数组引用没有指向实体，却操作实体中的元素时

#### Java 内存模型

* **栈：存储局部变量**
  * 局部变量：在方法中定义的变量都是局部变量，分配在栈内存中
  * 必须显式初始化，没有默认初始值
  * 局部变量一旦超出作用域，立即被虚拟机回收
* **堆：存储 new 出来的对象**
  * 虚拟机会进行默认初始化动作
  * 默认初始化值
    * byte short int        0
    * char         		'\u0000'
    * float double          0.0
    * boolean                 false
    * 引用类型                null
  * 即使成为垃圾，也不会被虚拟机立即回收，而是由**垃圾回收器**空闲时回收
    * 当没有任何对象使用该对象时，就会被变为垃圾
* **方法区**
* 本地方法栈
  * 系统相关
  * JNI ：Java 可以通过 JNI 来调用其他语言提供的功能
* 程序计数器

























