# Java 类和对象

#### 内容摘要

static，静态变量和成员变量，**代码块**，访问限制，**参数传递**，**继承**，super

------

#### static 关键字

* 静态方法中没有 this 关键字
* 在非静态上下文（*context*）中不能出现 static
* 静态方法的特性同静态变量

#### 静态变量和成员变量

|          | 静态变量          | 成员变量           |
| -------- | ------------- | -------------- |
| 所属不同     | 属于类，也叫类变量     | 属于对象，也叫实例变量    |
| 内存中位置不同  | 方法区中的静态区      | 堆内存            |
| 内存生命周期不同 | 随类加载而加载，销毁而销毁 | 随对象创建而存在，消失而消失 |
| 调用不同     | 类名调用或对象调用     | 对象名（引用类型）调用    |

#### 代码块

* `{ }` 内的内容 

* 分类

  * 局部代码块
    * 在方法中定义的代码块
  * **构造代码块** *init block*
    * 声明在类中其他方法外，也叫初始化代码块
    * 与类中成员方法，成员变量平行
    * **将多个构造方法中相同代码放到一起**
    * **每次调用构造( new 对象 )执行，在构造方法前执行**
  * **静态代码块** *static block*
    * 声明在类中其他方法外，用 static 修饰，有 static 的特性
    * **给类进行初始化，在加载的时候就执行，并且只执行一次**
  * 同步代码块

* **执行顺序**

  `static block` ==> `init block` ==> `constructor`

#### 访问控制

* 限制**成员变量或成员方法**在类和对象外部的可见性


* `public`
  * 任何
* `protected`
  * 当前类体中
  * 子类类体中，同包，异包都可以
  * 同包的其他类类体中
* `private`
  * 当前类体中
  * 子类也不可见
* 默认，即不声明修饰符
  * 当前类体中
  * 同包的其他类体中

#### class 权限修饰符

* `public`
  * 同包异包都可
* 默认，不写修饰符
  * 同包内

#### 参数传递

* 值传递 

  * 当实际参数的类型是**基本数据类型**时，在方法调用时，实际参数的值**复制**给形式参数
  * 改变形式参数的值，不会影响实际参数
  * 内存中：栈内存中形式参数直接复制实际参数的值，数值

* 引用传递

  * 当实际参数的类型是**引用数据类型**时，引用传递

  * 内存中：栈内存中形式参数直接复制实际参数的值，即**内存地址**，堆中对象的引用，指向同一对象

  * 引用变量 通过 值传递进行交换时，不会影响实际引用变量

    ```Java
    void change(Student s1, Student s2) { // 仅仅交换形式参数的内存地址，对实际参数没影响
      Student temp = s1; 
      s1 = s2;
      s2 = temp;
    }
    ```

#### 继承 *extends*

* **代码复用**
* `[修饰符] class 类名 extends 父类类名 {}`
* 子类 *subclass* 父类 *superclass* 祖先 *ancestor*
* 子类可以访问父类和祖先类的 `public` `protected`成员变量、成员方法
* 构造子类
  * 堆内存中，子类对象里有一块内存放置父类成员
  * 子类对象的成员初始化前必须先完成父类或祖先类对象的成员初始化
  * 执行子类的构造方法之前会自动执行父类的构造方法
  * 直到执行完 `Object` （所以类的共同祖先）的构造方法后才执行子类的构造方法
  * **当所有父类初始化完毕才初始化子类对象** （递归初始化）
  * 隐式初始化
    * 当父类**提供默认构造方法**，且子类的构造方法没有显式调用父类的构造方法
    * 即虚拟机隐式调用父类无参构造方法
  * 显式初始化
    * 显式调用父类构造方法，控制父类成员变量初始化
    * 在子类构造方法中通过 `super` 关键字 + 方法签名，调用父类构造方法
      * 必须是子类构造方法中**第一条语句**
    * 当父类**没有提供默认构造方法**，子类需要显示的调用父类含参构造方法
* 父类中成员变量隐藏
  * 父类和子类中定义了同名成员变量，父类成员被隐藏
  * 可以用 `super.` 来访问父类成员

#### super 关键字

* 子类在构造方法中可以通过super关键字，控制父类成员变量的初始化

* 例如：父类有个 private 成员变量，子类可以通过 super 调用父类含参构造方法为 private 成员赋初值

  ```Java
  class Circle {
    private int radius;
    public Circle (int radius) {
  	this.radius = r;
    }
  }
  class Cylinder extends Circle {
    private int hight;
    public Cylinder (int radius, int hight) {
      super(radius); // radius 通过父类构造方法传入父类中私有成员变量
      this.hight = hight;
    }
  }
  ```

* 表示对父类对象的引用

  * 通过 `super.` 访问父类成员
  * 若是 private 修饰的成员，不能访问


| this       | super      |
| ---------- | ---------- |
| 自身调用自身构造方法 | 子类调用父类构造方法 |
| 当前对象的引用    | 父类对象的引用    |




















