## Java 06 类和对象

#### 内容摘要

类，对象，面向对像OO，三大特征，局部变量，static，内存模型

---

#### 对象

* 属性 + 操作
* 对象的操作就是对象的行为

#### 类

* 数据类型：数据集以及定义在数据集上的一组操作
* 即类是自定义数据类型：数据集（属性） +  操作（方法）
* 同种对象的集合和抽象
* 使用对象：通过定义**具体的类**所对应的实体 —— 对象

#### 面向对象 *Object Oriented*

* 使得软件开发更接近人的思维
* 面向对象的分析
* 面向对象的设计
* **面向对象的程序设计**
* 代码重用

#### 面向对象三大特征

* **封装** *encapsulation*
  * 信息**隐藏**技术
  * 将数据和基于数据的操作封装在一起，数据被保护在内部，只能通过开放出来的接口才能交互
  * 目的：将类的使用者*class user* 和类的设计者 class creator 分开
  * 面向对象中，封装数据和方法，保证数据的安全和系统的严密性
* **继承** *extends*
  * ` class ThisClass extends SuperClass {} `
  * 子类可以使用父类提供的方法，实现了**代码的复用** （代码复用除了 继承 还有 组合）
  * **Java 仅支持单继承**
* **多态** *polymorphism*
  * 用同一个函数调用实现不同的操作方法
  * **重载** *overload*
    * 任意类中都会发生
    * 同一类中参数不同的同名方法（编译时多态）
    * 根据使用场景，编译器能确定该执行哪个参数的方法
    * 方法重载
      * 方法签名 *signature*：方法名 + 参数列表
      * **不能声明签名相同的两个方法**
  * **覆盖** *override*
    * 继承关系的类中才会发生
    * 父类和子类之间的参数相同的同名方法（运行时多态）
    * 子类的方法会覆盖父类的方法
    * 只有程序在内存中运行时，虚拟机才知道该调用哪一个（子类 or 父类）的方法

#### 类

```Java
/*
      [修饰符] class 类名 [extends 父类名] [implements 接口名] {
      			[成员变量声明]
     		 	[成员方法声明]
      }
*/
public class Student {
  
  // 成员属性
  String name;
  int age;
  
  // 构造方法
  public Student(String name) {
    this.name = name;
  }
  
  // 成员方法
  public void study(){
    //...
  }
  public void sleep(){
	//...
  }
}

/*
1.声明一个对象的引用变量
2.初始化
3.赋初值
*/
Student student = new Student();
Student student2 = new Student("Tony");
```

* 构造方法
  * 构造方法是一种特殊的方法
  * 重载不同构造方法灵活得对对象数据初始化
  * 方法名与类名相同
  * 没有返回类型，没有具体返回值
  * 注意事项
    * 如果不写出构造方法，虚拟机会自动给出默认构造方法（无参数，无方法体）
    * 如果写出了构造方法，那么虚拟机将不会自动给出无参构造方法
    * 构造方法可以重载
* this 关键字
  * 表示当前**对象**的引用
  * 当前对象即 调用方法或访问属性时的对象
* 成员变量
  * 在**类**中定义的变量

#### 局部变量

* 在**方法**中定义的变量
* 参数列表中的**形式参数**也是局部变量
* 生命周期：在方法创建时创建，在方法结束时销毁
* **局部变量必须先赋值再使用，否则会出现编译错误**
* 成员变量的隐藏
  * 成员变量和局部变量 变量名相同时，在局部变量作用域内，成员变量隐藏
  * 可以用 `this.` 避免

#### static 关键字

* static 修饰的成员变量，被类的所有对象共享，也叫类变量
* 随着类的加载而加载，优先于对象存在
* 可以通过类名调用，依赖于类而不是对象
* 静态方法中没有 this 关键字
* 静态方法只能访问 静态成员方法 和 静态成员变量
  * 普通成员变量依赖于对象，而静态成员变量依赖于类
  * 没有对象，普通成员变量就不会存在内存中

#### 创建对象内存图解

![创建对象内存图解](http://on-img.com/chart_image/5a532424e4b0abe85d4463fc.png)

* 3和4 之间，还有一步：对成员变量进行显示初始化，即编写类时成员变量的初始化值

#### Java 内存模型

* **方法区**
  * 存储 class 字节码文件内容，方法，静态变量，常量池



















